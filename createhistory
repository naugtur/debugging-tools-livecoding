#!/bin/bash

git checkout main
git tag -d 0
git branch -D demo
git checkout -b demo
git checkout dev history
git checkout dev sample
git checkout dev .vscode
git checkout dev package.json
git checkout dev package-lock.json
echo history>.gitignore
mkdir src
git add -A 
git commit -m "sample"
git tag 0


for var in history/*
do
    echo "$var"
    rm -fr ./src/*
    cp -r $var/* ./src/
    message=`cat ./src/COMMIT_MESSAGE`
    rm ./src/COMMIT_MESSAGE
    git add ./src
    git commit -am "$message"
done

git checkout 0


